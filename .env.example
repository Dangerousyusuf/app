# Project Root Environment Configuration
# Copy this file to .env and update values for your environment

# =============================================================================
# HTTPS CONFIGURATION
# =============================================================================

# Domain Configuration (Required for HTTPS)
DOMAIN=yourdomain.com
WWW_REDIRECT=true

# SSL Certificate Paths (Required for NGINX HTTPS)
SSL_CERT_PATH=/etc/letsencrypt/live/yourdomain.com/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/yourdomain.com/privkey.pem

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# Development Network IP (Auto-detected, override if needed)
DEV_NETWORK_IP=auto

# Development Ports
FRONTEND_PORT=8081
API_GATEWAY_PORT=3001
BACKEND_PORT=3000

# =============================================================================
# PRODUCTION CONFIGURATION
# =============================================================================

# Production URLs (HTTPS enforced)
PRODUCTION_FRONTEND_URL=https://yourdomain.com
PRODUCTION_API_URL=https://api.yourdomain.com
PRODUCTION_BACKEND_URL=https://backend.yourdomain.com

# CORS Allowlist for Production (comma-separated HTTPS URLs)
CORS_ALLOWLIST=https://yourdomain.com,https://www.yourdomain.com,https://api.yourdomain.com

# Security Settings
FORCE_HTTPS=true
TRUST_PROXY=true
SECURE_COOKIES=true

# =============================================================================
# SHARED CONFIGURATION
# =============================================================================

# Environment
NODE_ENV=production

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-minimum-32-chars
JWT_EXPIRES_IN=24h

# Database Configuration (PostgreSQL)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=app_production
DB_USER=app_user
DB_PASSWORD=secure_password_change_this

# Rate Limiting
API_RATE_LIMIT_WINDOW_MS=900000
API_RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX_REQUESTS=5

# File Upload
UPLOAD_MAX_SIZE=5242880
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/webp,image/gif

# Logging
LOG_LEVEL=info
LOG_DIR=logs

# =============================================================================
# MIGRATION NOTES
# =============================================================================
# 
# HTTPS Migration Checklist:
# 1. Update DOMAIN to your actual domain
# 2. Configure SSL certificates (Let's Encrypt recommended)
# 3. Set CORS_ALLOWLIST to your HTTPS URLs only
# 4. Enable FORCE_HTTPS and TRUST_PROXY for production
# 5. Update frontend environment variables (EXPO_PUBLIC_*)
# 6. Test all services with HTTPS URLs
# 
# Security Notes:
# - Never use HTTP in production
# - Always use SecureStore for mobile token storage
# - Enable HSTS headers in NGINX
# - Use strong JWT secrets (minimum 32 characters)
# - Regularly rotate JWT secrets
# =============================================================================